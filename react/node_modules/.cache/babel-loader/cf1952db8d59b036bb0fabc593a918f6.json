{"ast":null,"code":"var _jsxFileName = \"/home/danielm/Desktop/New /Sinatra-Frontend/react_client/src/components/ShoppingApplication.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport ShoppingList from \"./ShoppingList\";\nimport \"./ShoppingApplication.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ShoppingApplication() {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\n  const [shoppingCategories, setShoppingCategories] = useState([]);\n  const [categoryNames, setCategoryNames] = useState([]);\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393//shopping_items\").then(r => r.json()).then(function (data) {\n      setItems(data.filter(item => item.user_id === user.id));\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393//shopping_categories\").then(r => r.json()).then(function (data) {\n      setShoppingCategories(data);\n      const categories_arr = data.map(e => e.name);\n      categories_arr.unshift(\"All\");\n      setCategoryNames(categories_arr);\n    });\n  }, []);\n\n  function handleDeleteItem(key) {\n    setItems(items.filter(element => element.id !== key));\n  }\n\n  function handleCategorySelected(category) {\n    setSelectedCategory(category);\n  }\n\n  function addNewItem(newItem) {\n    setItems([...items, newItem]);\n  }\n\n  const selectedCategoryObj = shoppingCategories.find(obj => {\n    return obj.name === selectedCategory;\n  });\n  let selectedItems = [];\n\n  if (selectedCategory === \"All\") {\n    selectedItems = items;\n  } else {\n    selectedItems = items.filter(item => item.shopping_category_id === selectedCategoryObj.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shopping List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ShoppingList, {\n      onDeleteItem: handleDeleteItem,\n      items: selectedItems,\n      shoppingCategories: shoppingCategories,\n      categoryNames: categoryNames,\n      selectedCategory: selectedCategory,\n      onCategorySelected: handleCategorySelected,\n      onNewShoppingItemFormSubmit: addNewItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ShoppingApplication, \"CkeeoLI6Mxs48omDm5CSP+ndnHs=\");\n\n_c = ShoppingApplication;\nexport default ShoppingApplication;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingApplication\");","map":{"version":3,"sources":["/home/danielm/Desktop/New /Sinatra-Frontend/react_client/src/components/ShoppingApplication.js"],"names":["React","useState","useEffect","useContext","UserContext","ShoppingList","ShoppingApplication","items","setItems","selectedCategory","setSelectedCategory","shoppingCategories","setShoppingCategories","categoryNames","setCategoryNames","user","setUser","fetch","then","r","json","data","filter","item","user_id","id","categories_arr","map","e","name","unshift","handleDeleteItem","key","element","handleCategorySelected","category","addNewItem","newItem","selectedCategoryObj","find","obj","selectedItems","shopping_category_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from \"react\"\nimport { UserContext } from \"./UserContext\";\nimport ShoppingList from \"./ShoppingList\"\nimport \"./ShoppingApplication.css\"\n\nfunction ShoppingApplication() {\n    const [items, setItems] = useState([])\n    const [selectedCategory, setSelectedCategory] = useState(\"All\")\n    const [shoppingCategories, setShoppingCategories] = useState([])\n    const [categoryNames, setCategoryNames] = useState([])\n    const {user, setUser} = useContext(UserContext);\n\n    useEffect(() => {\n        fetch(\"http://127.0.0.1:9393//shopping_items\")\n          .then((r) => r.json())\n          .then(function(data) {\n            \n            setItems(data.filter((item) => (item.user_id === user.id)))});\n      }, []);\n    \n   \n      useEffect(() => {\n        fetch(\"http://127.0.0.1:9393//shopping_categories\")\n          .then((r) => r.json())\n          .then(function(data) {\n            setShoppingCategories(data)\n            const categories_arr = data.map(e => e.name)\n            categories_arr.unshift(\"All\")\n            setCategoryNames(categories_arr)});\n      }, []);\n      \n\n    function handleDeleteItem(key) {\n        setItems(items.filter((element) => (element.id !== key)))\n    }\n    \n    function handleCategorySelected(category) {\n        setSelectedCategory(category)\n    }\n\n    function addNewItem(newItem) {\n        setItems([...items, newItem])\n    }\n\n    const selectedCategoryObj = shoppingCategories.find(obj => {\n        return obj.name === selectedCategory\n      })\n\n    let selectedItems = []\n      if (selectedCategory === \"All\") {\n        selectedItems = items\n      } else {\n        selectedItems = items.filter((item) => \n        (item.shopping_category_id === selectedCategoryObj.id))\n      }\n\n    return (\n        <div className=\"App\">\n            <h2>Shopping List</h2>\n            <ShoppingList onDeleteItem={handleDeleteItem} items={selectedItems} shoppingCategories={shoppingCategories} categoryNames={categoryNames} selectedCategory={selectedCategory} onCategorySelected={handleCategorySelected} onNewShoppingItemFormSubmit={addNewItem}/>\n        </div>)\n}\n\nexport default ShoppingApplication;"]},"metadata":{},"sourceType":"module"}