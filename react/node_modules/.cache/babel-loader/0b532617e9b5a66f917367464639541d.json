{"ast":null,"code":"var _jsxFileName = \"/home/danielm/Desktop/New /Sinatra-Frontend/react_client/src/components/TodoApplication.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport TodoList from \"./TodoList\";\nimport \"./TodoApplication.css\";\nimport { UserContext } from \"./UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TodoApplication() {\n  _s();\n\n  const [todos, setTodos] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\n  const [todoCategories, setTodoCategories] = useState([]);\n  const [categoryNames, setCategoryNames] = useState([]);\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393/todos\").then(r => r.json()).then(function (data) {\n      setTodos(data.filter(todo => todo.user_id === user.id));\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393/todo_categories\").then(r => r.json()).then(function (data) {\n      setTodoCategories(data);\n      const categories_arr = data.map(e => e.name);\n      categories_arr.unshift(\"All\");\n      setCategoryNames(categories_arr);\n    });\n  }, []);\n\n  function handleDeleteTodo(key) {\n    setTodos(todos.filter(element => element.id !== key));\n  }\n\n  function handleCategorySelected(category) {\n    setSelectedCategory(category);\n  }\n\n  function addNewTodo(newTodo) {\n    setTodos([...todos, newTodo]);\n  }\n\n  const selectedCategoryObj = todoCategories.find(obj => {\n    return obj.name === selectedCategory;\n  });\n  let selectedTodos = [];\n\n  if (selectedCategory === \"All\") {\n    selectedTodos = todos;\n  } else {\n    selectedTodos = todos.filter(todo => todo.todo_category_id === selectedCategoryObj.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Todo List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TodoList, {\n      onDeleteTodo: handleDeleteTodo,\n      todos: selectedTodos,\n      todoCategories: todoCategories,\n      categoryNames: categoryNames,\n      selectedCategory: selectedCategory,\n      onCategorySelected: handleCategorySelected,\n      onNewTodoFormSubmit: addNewTodo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TodoApplication, \"o6yOsm6j5UN/lftOnHP/qzs34H4=\");\n\n_c = TodoApplication;\nexport default TodoApplication;\n\nvar _c;\n\n$RefreshReg$(_c, \"TodoApplication\");","map":{"version":3,"sources":["/home/danielm/Desktop/New /Sinatra-Frontend/react_client/src/components/TodoApplication.js"],"names":["React","useState","useEffect","useContext","TodoList","UserContext","TodoApplication","todos","setTodos","selectedCategory","setSelectedCategory","todoCategories","setTodoCategories","categoryNames","setCategoryNames","user","setUser","fetch","then","r","json","data","filter","todo","user_id","id","categories_arr","map","e","name","unshift","handleDeleteTodo","key","element","handleCategorySelected","category","addNewTodo","newTodo","selectedCategoryObj","find","obj","selectedTodos","todo_category_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from \"react\"\nimport TodoList from \"./TodoList\"\nimport \"./TodoApplication.css\";\nimport { UserContext } from \"./UserContext\";\n\n\nfunction TodoApplication() {\n  const [todos, setTodos] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\n  const [todoCategories, setTodoCategories] = useState([]);\n  const [categoryNames, setCategoryNames] = useState([]);\n  const {user, setUser} = useContext(UserContext);\n  \n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393/todos\")\n      .then((r) => r.json())\n      .then(function(data) {\n        setTodos(data.filter((todo)=>(todo.user_id === user.id)))});\n  }, []);\n\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:9393/todo_categories\")\n      .then((r) => r.json())\n      .then(function(data) {\n        setTodoCategories(data)\n        const categories_arr = data.map(e => e.name)\n        categories_arr.unshift(\"All\")\n        setCategoryNames(categories_arr)});\n  }, []);\n\n\n\n  function handleDeleteTodo(key) {\n    setTodos(todos.filter((element) => (element.id !== key)))\n  }\n\n  function handleCategorySelected(category) {\n    setSelectedCategory(category)\n  }\n\n  function addNewTodo(newTodo) {\n    setTodos([...todos, newTodo])\n  }\n  \n\n\n  const selectedCategoryObj = todoCategories.find(obj => {\n    return obj.name === selectedCategory\n  })\n\n  let selectedTodos = []\n  if (selectedCategory === \"All\") {\n    selectedTodos = todos\n  } else {\n    selectedTodos = todos.filter((todo) => \n    (todo.todo_category_id === selectedCategoryObj.id))\n  }\n\n  return (\n    <div className=\"App\">\n      <h2>Todo List</h2>\n      <TodoList onDeleteTodo={handleDeleteTodo} todos={selectedTodos} todoCategories={todoCategories} categoryNames={categoryNames} selectedCategory={selectedCategory} onCategorySelected={handleCategorySelected} onNewTodoFormSubmit={addNewTodo}></TodoList>\n      </div>\n\n  );\n}\n\nexport default TodoApplication;"]},"metadata":{},"sourceType":"module"}